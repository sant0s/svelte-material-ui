function D(n){return Object.entries(n).filter(([t,r])=>t!==""&&r).map(([t])=>t).join(" ")}const m=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,b=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function I(n){let t,r=[];n.$on=(e,i)=>{let a=e,o=()=>{};return t?o=t(a,i):r.push([a,i]),a.match(m)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',a),()=>{o()}};function s(e){const i=n.$$.callbacks[e.type];i&&i.slice().forEach(a=>a.call(this,e))}return e=>{const i=[],a={};t=(o,v)=>{let f=o,u=v,l=!1;const y=f.match(m),$=f.match(b),w=y||$;if(f.match(/^SMUI:\w+:/)){const p=f.split(":");let c="";for(let d=0;d<p.length;d++)c+=d===p.length-1?":"+p[d]:p[d].split("-").map(h=>h.slice(0,1).toUpperCase()+h.slice(1)).join("");console.warn(`The event ${f.split("$")[0]} has been renamed to ${c.split("$")[0]}.`),f=c}if(w){const p=f.split(y?":":"$");f=p[0];const c=p.slice(1).reduce((d,h)=>(d[h]=!0,d),{});c.passive&&(l=l||{},l.passive=!0),c.nonpassive&&(l=l||{},l.passive=!1),c.capture&&(l=l||{},l.capture=!0),c.once&&(l=l||{},l.once=!0),c.preventDefault&&(u=P(u)),c.stopPropagation&&(u=A(u)),c.stopImmediatePropagation&&(u=T(u)),c.self&&(u=_(e,u)),c.trusted&&(u=x(u))}const E=M(e,f,u,l),g=()=>{E();const p=i.indexOf(g);p>-1&&i.splice(p,1)};return i.push(g),f in a||(a[f]=M(e,f,s)),g};for(let o=0;o<r.length;o++)t(r[o][0],r[o][1]);return{destroy:()=>{for(let o=0;o<i.length;o++)i[o]();for(let o of Object.entries(a))o[1]()}}}}function M(n,t,r,s){return n.addEventListener(t,r,s),()=>n.removeEventListener(t,r,s)}function P(n){return function(t){return t.preventDefault(),n.call(this,t)}}function A(n){return function(t){return t.stopPropagation(),n.call(this,t)}}function T(n){return function(t){return t.stopImmediatePropagation(),n.call(this,t)}}function _(n,t){return function(r){if(r.target===n)return t.call(this,r)}}function x(n){return function(t){if(t.isTrusted)return n.call(this,t)}}function O(n,t){let r=[];if(t)for(let s=0;s<t.length;s++){const e=t[s],i=Array.isArray(e)?e[0]:e;Array.isArray(e)&&e.length>1?r.push(i(n,e[1])):r.push(i(n))}return{update(s){if((s&&s.length||0)!=r.length)throw new Error("You must not change the length of an actions array.");if(s)for(let e=0;e<s.length;e++){const i=r[e];if(i&&i.update){const a=s[e];Array.isArray(a)&&a.length>1?i.update(a[1]):i.update()}}},destroy(){for(let s=0;s<r.length;s++){const e=r[s];e&&e.destroy&&e.destroy()}}}}export{D as c,I as f,O as u};
