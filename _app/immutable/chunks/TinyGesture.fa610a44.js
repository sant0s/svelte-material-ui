class m{constructor(t,i){this.element=t,this.touchStartX=null,this.touchStartY=null,this.touchEndX=null,this.touchEndY=null,this.touchMoveX=null,this.touchMoveY=null,this.velocityX=null,this.velocityY=null,this.longPressTimer=null,this.doubleTapTimer=null,this.doubleTapWaiting=!1,this.thresholdX=0,this.thresholdY=0,this.disregardVelocityThresholdX=0,this.disregardVelocityThresholdY=0,this.swipingHorizontal=!1,this.swipingVertical=!1,this.swipingDirection=null,this.swipedHorizontal=!1,this.swipedVertical=!1,this.handlers={panstart:[],panmove:[],panend:[],swipeleft:[],swiperight:[],swipeup:[],swipedown:[],tap:[],doubletap:[],longpress:[]},this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onTouchEnd=this.onTouchEnd.bind(this),this.opts=Object.assign({},m.defaults,i),this.element.addEventListener("touchstart",this._onTouchStart,r),this.element.addEventListener("touchmove",this._onTouchMove,r),this.element.addEventListener("touchend",this._onTouchEnd,r),this.opts.mouseSupport&&!("ontouchstart"in window)&&(this.element.addEventListener("mousedown",this._onTouchStart,r),document.addEventListener("mousemove",this._onTouchMove,r),document.addEventListener("mouseup",this._onTouchEnd,r))}destroy(){var t,i;this.element.removeEventListener("touchstart",this._onTouchStart),this.element.removeEventListener("touchmove",this._onTouchMove),this.element.removeEventListener("touchend",this._onTouchEnd),this.element.removeEventListener("mousedown",this._onTouchStart),document.removeEventListener("mousemove",this._onTouchMove),document.removeEventListener("mouseup",this._onTouchEnd),clearTimeout((t=this.longPressTimer)!==null&&t!==void 0?t:void 0),clearTimeout((i=this.doubleTapTimer)!==null&&i!==void 0?i:void 0)}on(t,i){if(this.handlers[t])return this.handlers[t].push(i),{type:t,fn:i,cancel:()=>this.off(t,i)}}off(t,i){if(this.handlers[t]){const s=this.handlers[t].indexOf(i);s!==-1&&this.handlers[t].splice(s,1)}}fire(t,i){for(let s=0;s<this.handlers[t].length;s++)this.handlers[t][s](i)}onTouchStart(t){this.thresholdX=this.opts.threshold("x",this),this.thresholdY=this.opts.threshold("y",this),this.disregardVelocityThresholdX=this.opts.disregardVelocityThreshold("x",this),this.disregardVelocityThresholdY=this.opts.disregardVelocityThreshold("y",this),this.touchStartX=t.type==="mousedown"?t.screenX:t.changedTouches[0].screenX,this.touchStartY=t.type==="mousedown"?t.screenY:t.changedTouches[0].screenY,this.touchMoveX=null,this.touchMoveY=null,this.touchEndX=null,this.touchEndY=null,this.swipingDirection=null,this.longPressTimer=setTimeout(()=>this.fire("longpress",t),this.opts.longPressTime),this.fire("panstart",t)}onTouchMove(t){var i,s,h,o,l;if(t.type==="mousemove"&&(!this.touchStartX||this.touchEndX!==null))return;const d=(t.type==="mousemove"?t.screenX:t.changedTouches[0].screenX)-((i=this.touchStartX)!==null&&i!==void 0?i:0);this.velocityX=d-((s=this.touchMoveX)!==null&&s!==void 0?s:0),this.touchMoveX=d;const u=(t.type==="mousemove"?t.screenY:t.changedTouches[0].screenY)-((h=this.touchStartY)!==null&&h!==void 0?h:0);this.velocityY=u-((o=this.touchMoveY)!==null&&o!==void 0?o:0),this.touchMoveY=u;const n=Math.abs(this.touchMoveX),e=Math.abs(this.touchMoveY);this.swipingHorizontal=n>this.thresholdX,this.swipingVertical=e>this.thresholdY,this.swipingDirection=n>e?this.swipingHorizontal?"horizontal":"pre-horizontal":this.swipingVertical?"vertical":"pre-vertical",Math.max(n,e)>this.opts.pressThreshold&&clearTimeout((l=this.longPressTimer)!==null&&l!==void 0?l:void 0),this.fire("panmove",t)}onTouchEnd(t){var i,s,h,o,l,d,u,n;if(t.type==="mouseup"&&(!this.touchStartX||this.touchEndX!==null))return;this.touchEndX=t.type==="mouseup"?t.screenX:t.changedTouches[0].screenX,this.touchEndY=t.type==="mouseup"?t.screenY:t.changedTouches[0].screenY,this.fire("panend",t),clearTimeout((i=this.longPressTimer)!==null&&i!==void 0?i:void 0);const e=this.touchEndX-((s=this.touchStartX)!==null&&s!==void 0?s:0),c=Math.abs(e),a=this.touchEndY-((h=this.touchStartY)!==null&&h!==void 0?h:0),p=Math.abs(a);c>this.thresholdX||p>this.thresholdY?(this.swipedHorizontal=this.opts.diagonalSwipes?Math.abs(e/a)<=this.opts.diagonalLimit:c>=p&&c>this.thresholdX,this.swipedVertical=this.opts.diagonalSwipes?Math.abs(a/e)<=this.opts.diagonalLimit:p>c&&p>this.thresholdY,this.swipedHorizontal&&(e<0?(((o=this.velocityX)!==null&&o!==void 0?o:0)<-this.opts.velocityThreshold||e<-this.disregardVelocityThresholdX)&&this.fire("swipeleft",t):(((l=this.velocityX)!==null&&l!==void 0?l:0)>this.opts.velocityThreshold||e>this.disregardVelocityThresholdX)&&this.fire("swiperight",t)),this.swipedVertical&&(a<0?(((d=this.velocityY)!==null&&d!==void 0?d:0)<-this.opts.velocityThreshold||a<-this.disregardVelocityThresholdY)&&this.fire("swipeup",t):(((u=this.velocityY)!==null&&u!==void 0?u:0)>this.opts.velocityThreshold||a>this.disregardVelocityThresholdY)&&this.fire("swipedown",t))):c<this.opts.pressThreshold&&p<this.opts.pressThreshold&&(this.doubleTapWaiting?(this.doubleTapWaiting=!1,clearTimeout((n=this.doubleTapTimer)!==null&&n!==void 0?n:void 0),this.fire("doubletap",t)):(this.doubleTapWaiting=!0,this.doubleTapTimer=setTimeout(()=>this.doubleTapWaiting=!1,this.opts.doubleTapTime),this.fire("tap",t)))}}m.defaults={threshold:(T,t)=>Math.max(25,Math.floor(.15*(T==="x"?window.innerWidth||document.body.clientWidth:window.innerHeight||document.body.clientHeight))),velocityThreshold:10,disregardVelocityThreshold:(T,t)=>Math.floor(.5*(T==="x"?t.element.clientWidth:t.element.clientHeight)),pressThreshold:8,diagonalSwipes:!1,diagonalLimit:Math.tan(45*1.5/180*Math.PI),longPressTime:500,doubleTapTime:300,mouseSupport:!0};let r=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){r={passive:!0}}}))}catch{}export{m as T};
